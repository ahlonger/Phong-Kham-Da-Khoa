generator client {
   provider = "prisma-client-js"
   output   = "../src/generated/client"
 }
  datasource db {
   provider = "mysql"
   url      = env("DATABASE_URL")
 }

model User {
  id      Int      @id @default(autoincrement())
  name    String
  email   String   @unique
  password   String?
  avatar  String?
  role    String
  dichvuId  Int?
  chuyenmon     String?          // n·∫øu kh√¥ng mu·ªën d√πng Dichvu.title l√†m chuy√™n khoa
  namkinhnghiem Int?
  gioithieu     String?
  thanhtuu      String?
  phone          String?    // s·ªë ƒëi·ªán tho·∫°i
  address        String?    // ƒë·ªãa ch·ªâ
  gioitinh       String?    // gi·ªõi t√≠nh
  dichvu    Dichvu? @relation(fields: [dichvuId], references: [id])
  bookings  Booking[] @relation("DoctorBookings")
  workSchedules WorkSchedule[]
  // üëá th√™m 2 field cho reset m·∫≠t kh·∫©u
  resetToken   String?
  resetExpire  DateTime?

}
model Booking {
  id           Int      @id @default(autoincrement())
  hoten        String
  email        String
  sdt          String
  diachi       String
  dichvu       String
  bacsi        String
  gioitinh     String?
  ghichu       String?
  thoigianhen  DateTime
  dongy        Boolean
  created_at   DateTime @default(now())
  doctorId     Int?
  doctor       User?     @relation("DoctorBookings", fields: [doctorId], references: [id])
  serviceId    Int?
  service      Dichvu?   @relation(fields: [serviceId], references: [id])
  xacnhan      Boolean   @default(false)
  huy          Boolean   @default(false)
  trangThai    String?
}

model Dichvu {
  id        Int      @id @default(autoincrement())
  title     String   @unique              // t√™n d·ªãch v·ª•
  desc      String?                       // m√¥ t·∫£ d·ªãch v·ª•
  price     Int                           // gi√° (VND) - d√πng Int, n·∫øu c·∫ßn s·ªë l·∫ª th√¨ ƒë·ªïi Decimal
  image     String?                       // link ·∫£nh ho·∫∑c path
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Quan h·ªá v·ªõi User (doctors)
  doctors   User[]                        // 1 d·ªãch v·ª• c√≥ nhi·ªÅu b√°c sƒ©
  bookings  Booking[]  // 1 d·ªãch v·ª• c√≥ nhi·ªÅu booking
}

model WorkSchedule {
  id         Int      @id @default(autoincrement())
  date       DateTime
  startTime  String    // "08:00"
  endTime    String    // "11:30"
  room       String
  status     String    @default("ƒêang ch·ªù x√°c nh·∫≠n")

  doctorId   Int?
  doctor     User?     @relation(fields: [doctorId], references: [id])

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}